ZXDev
=====

ZXDev - это подсистема для кроссразработки программ для компьютера Sinlair ZX Spectrum.
Поддержана плоская модель памяти Sinclair ZX Spectrum с 48Kb.

Файлы .odc - это Oberon DoCument, открываются в программе BlackBox.exe,
можете ассоциировать их с ней.

Лицензия
========

Подсистему ZXDev разрешается использовать для любых коммерческих или некоммерческих
применений свободно. Любая помощь в работе, даже мельчайшая, будет очень кстати.

Доступные библиотеки
====================

- Libs/Basic.odc - Sinclair ZX Spectrum Basic for Ofront/SDCC
- Libs/Laser.odc - Laser Basic for Ofront/SDCC

Быстрый старт
=============

HelloWorld
----------
1. Запустить BlackBox.exe
2. File -> Open -> ZXDev/Mod/HelloWorld.odc
3. Компилим: F11
4. Линкуем: ZXDev/HelloWorld.bat

Если размер бинарника в 2.2 Кб кажется слишком большим, то учтите, что в качестве
процедур для вывода текста используются подпрограммы не из ПЗУ, а свои, ускоренные.
Надо ещё посмотреть в направлении уменьшения целевого бинарника. Думаю, это возможно.

LaserDemo
---------
1. Запустить BlackBox.exe
2. File -> Open -> ZXDev/Mod/LaserDemo.odc
3. Компилим: F11
4. Линкуем: ZXDev/LaserDemo.bat

Если размер бинарника в 13,2 Кб кажется слишком большим, то учтите, что в кодовый блок
включается ВСЯ библиотека Laser, однако есть идея как включать из неё только самые
необходимые фрагменты (Если хотите проделать такую работу, свяжитесь со мной).
Также учтите, что в код включены ВСЕ спрайты из пакета ZXDev/Libs/Laser/SPRITE2B.
Разумеется, здесь тоже можно включить только необходимые, выбросив неиспользуемые.

Полезные горячие клавиши в системе BlackBox
===========================================

(для тех, кому надо быстро)

F11
---
Транслировать текущий открытый в редакторе модуль с помощью подсистемы Ofront
с языка Оберон-2 в текст программы на Си.

F12
---
Компилировать текущий открытый в редакторе модуль с помощью подсистемы Dev
с языка Оберон-2/Компонентный Паскаль в кодовый Оберон-файл .ocf и символьный
файл .osf, выгрузить данный модуль из памяти (если загружен и если это возможно).

Ctrl+D
------
Показать клиентский интерфейс (аналог *.h в Си) выделенного модуля.
Выделите мышкой (или клавишами <-- и --> с Shift) имя модуля и нажмите Ctrl+D
( Работает только для модулей, скомпилированных подсистемой Dev ).

F9
--
Сравнить два открытых файла на предмет различий (подсвечиваются).

--
Сделать выделенный фрагмент текста форматированием как другой текст
Выделить текст, нажать Alt и тащить мышку на новое форматирование, отпустить.

Благодарности
=============

Евгению Михайлову (HVG) и Игорю Мазнице (Raydac) за разработку и распространение
декомпилированной командой Raydac Soft'93 A.G. библиотеки Laser Basic.

Известные проблемы
==================

0. Пример LaserDemo сейчас сбрасывается после исполнения, надо поискать почему.

1. Сейчас в библиотеке Basic поддержан только режим DI. Планируется добавить
   поддержку режимов IM0 и IM2. Реализовать режим IM0 стало возможно благодаря
   применению ключа SDCC --reserve-regs-iy, который запрещает компилятору
   использовать регистр IY).

2. Сейчас исполнение программы начинается с самой первой процедуры, объявленной
   в линкуемом как основной модуле (или с самого начала модуля, короче говоря).
   Данное ограничение вызвано тем, что не используется сишная функция main().

   Обходить предлагаю так. Вынесите стартовую точку программы в отдельный модуль
   и расположите её между BEGIN и END основного стартуемого модуля. Если такой
   вариант по каким-либо причинам нежелателен, примите стартовой точкой первую
   процедуру линкуемого как главный модуля, со всеми вытекающими.

TODO
====

- Разобраться с файлом Ofront.par
- Добавить сжатие целевого бинарника упаковщиком Hrust 1.3
- Добавить над подсистему для автоматической подсветки синтаксиса модулей:
  (Начать отсюда: http://forum.oberoncore.ru/viewtopic.php?f=114&t=3864 )

Сейчас раскрашиваю синтаксис так
================================

notepad++ (со схемой Pascal)
Дополнения -> NppExport -> Copy RTF to clipboard
Вставить в BlackBox раскрашенный текст Ctrl+V
Дораскрашивать путём перетаскивания с Alt выделенного текста
на текст с нужным форматированием.

Авторские права
===============

ZXDev - VEDANTA software - Oleg N. Cher ( ICQ 2-20-84-03  allot -bk- ru )

BlackBox Component Builder - Oberon microsystems AG - www.oberon.ch

Пакет русской документации для BlackBox 1.6 - проект ИНФОРМАТИКА-21

Ofront - Software Templ OG - www.software-templ.com

Small Device C Compiler - SDCC Team - http://sdcc.sourceforge.net/
Laser Basic for ZX Spectrum - Oasis, Ocean, Michailov (HVG) -
  ( http://zx.pk.ru/showthread.php?t=11615 )

PC110 Micro C (+Laser Basic lib) - Raydac Soft'93 A.G. (I.Maznitsa, E.Michailov)

BIN2TRD - Copper Feet '1999 (V.Mednonogov)

HEX2BIN - Rockwell Automation (Jacques Pelletier)

StripBIN - VEDANTA software - Oleg N. Cher

Win_TZX2TAP - Leszek Chmielewski - http://www.worldofspectrum.org/utilities.html
